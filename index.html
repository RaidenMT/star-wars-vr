<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roy's birthday - Star Wars</title>

    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>

    <script src="./assets/js/index.js"></script>
</head>

<body>

    <a-scene loading-screen="dotsColor: #ffca48; backgroundColor: black"
        gltf-model="dracoDecoderPath: ./assets/draco/;">
        <a-assets timeout="20000">
            <img id="sky" src="./assets/images/skyboxes/skybox-galaxy-2.jpg"
                alt="HDRI de https://hdrihaven.com/hdri/?h=satara_night">

            <!-- https://aframe.io/docs/1.1.0/core/asset-management-system.html#preloading-audio-and-video -->
            <audio id="song" src="./assets/audio/Star_Wars_original_opening_crawl_1977.mp3" preload></audio>
            <img id="stars" src="./assets/images/skyboxes/cubemap.png" alt="Cubemap from wwwtyro.net" preload>
            <img id="logo" src="./assets/images/svgs/logo.svg" alt="Logo of Star Wars" preload>
            <img id="deathstar" src="./assets/images/deathstar.png" alt="Deathstar" preload>
            <img id="deathstarskybox" src="./assets/images/skyboxes/deathstar.png" alt="" preload>

            <a-asset-item id="ship1" src="./assets/models/ships/star_wars_tie_advanced/scene.gltf" preload></a-asset-item>
            <a-asset-item id="ship2" src="./assets/models/ships/star_wars_tie_interceptor/scene.gltf" preload></a-asset-item>
            <a-asset-item id="ship3" src="./assets/models/ships/star_wars_tie_defender/scene.gltf" preload></a-asset-item>

            <a-asset-item id="stormtrooper" src="./assets/models/stormtrooper/scene.gltf" preload></a-asset-item>
            <a-asset-item id="mandalorian" src="./assets/models/mandalorian/scene.gltf" preload></a-asset-item>

            <a-mixin id="rotate" animation="property: rotation; to: 0 0 360; dur: 35000; loop: true;"></a-mixin>
        </a-assets>

        <!-- https://www.youtube.com/watch?v=Nfsx9V8tIYE -->
        <a-sky src="#stars"></a-sky>

        <a-sound src="#song" autoplay="true"></a-sound>

        <a-entity position="-3 -5 20"
            rotation="-30 180 0"
            animation="property: position; to: -25 30 -55; dur: 20000;"
            animation__hide="property: visible; to: false; delay: 29000;"
            >
            <a-entity gltf-model="#ship1" mixin="rotate"></a-entity>
            <a-entity gltf-model="#ship1" position="-5 0 2" mixin="rotate"></a-entity>
            <a-entity gltf-model="#ship1" position="-7 -1 2" mixin="rotate"></a-entity>
        </a-entity>

        <a-entity
            animation="property: rotation; to: 0 -2500 0; dur: 120000; dir: alternate">
            <a-entity gltf-model="#ship2" position="20 -10 -15"></a-entity>
            <a-entity gltf-model="#ship2" position="18 -9 -10"></a-entity>
        </a-entity>

        <a-entity
            animation="property: position; to: 15 5 80; dur: 30000; ">
            <a-entity gltf-model="#ship3" position="15 -5 -70"></a-entity>
            <a-entity gltf-model="#ship3" position="-15 -5 -70"></a-entity>
        </a-entity>

        <a-entity 
            text="value: A long time ago, in a galaxy far,\n far away...;
                    color: #4bd5ee;
                    width: 3;
                    align: left;
                    xOffset: 0.5;" 
            position="0 1.6 2"
            animation="property: text.color; from: rgba(0, 0, 0, 0); to: #4bd5ee; round: true; dir: alternate; loop: 2; dur: 4000; easing: easeOutCirc"
            animation__hide="property: visible; to: false; delay: 9100; round: true;"
        ></a-entity>

        <a-image 
            src="#logo"
            scale="6 3.5 4"
            position="0 1.6 3"
            color="#FFF933"
            visible="false"
            animation="property: position; to: 0 1.6 -100; dur: 80000; easing: easeOutQuint; delay: 10500;"
            animation__show="property: visible; to: true; delay: 8500;"
            animation__disappear="property: color; to: rgba(0,0,0,0); easing: easeOutSine; round: true; delay: 19500;"
        ></a-image>

        <a-entity 
            rotation="-60 0 0"
            position="0 1 2.5"
            visible="false"
            animation="property: position; to: 0 5.6 -10; dur: 70000; delay: 14000;"
            animation__show="property: visible; to: true; delay: 14000;"
            >
            <a-entity text="value: Episode VII;
                    color: #ffca48;
                    width: 2;
                    align: center;
                    baseline: top;"
                    animation__disappear="property: text.color; to: rgba(0,0,0,0); easing: easeOutSine; round: true; delay: 71000;"
                position="0 0 0"></a-entity>

            <a-entity text="anchor: align; 
                width: 3;
                value: THE FORCE AWAKENS; 
                color: #ffca48; 
                xOffset: -0.66; 
                zOffset:  0; 
                baseline: top;" 
                position="0 -0.2 0"
                animation__disappear="property: text.color; to: rgba(0,0,0,0); easing: easeOutSine; round: true; delay: 71000;"
                scale="1 1.3 1"></a-entity>

            <a-entity text="value: Luke Skywalker has vanished. In his absence, the sinister FIRST ORDER has risen from the ashes of the Empire and will not rest until Skywalker, the last Jedi, has been destroyed.

            With the support of the REPUBLIC, General Leia Organa leads a brave RESISTANCE. She is desperate to find her brother Luke and gain his help in restoring peace and justice to the galaxy.
            
            Leia has sent Roy Melgar, her most daring pilot on a secret mission to the Death Star, to find out the secret message that must be delivered...;
                    color: #ffca48;
                    width: 2;
                    align: left;
                    baseline: top;
                    lineHeight: 60;"
                    animation__disappear="property: text.color; to: rgba(0,0,0,0); easing: easeOutSine; round: true; delay: 71000;"
                position="0 -0.6 0"></a-entity>
        </a-entity>

        <a-entity animation="property: rotation; to: 0 180 0; dur: 80000;">
            <a-image 
                src="#deathstar" 
                position="0 1.6 10" 
                rotation="0 180 0"
                animation="property: position; to: 0 1.6 -1; dur: 5000; delay: 80000;"
            ></a-image>
        </a-entity>

        <a-link
            href="./deathstar.html"
            title="Death Star" 
            link="borderColor: #ffca48; backgroundColor: #000000; titleColor: #ffca48; titleColor: #ffca48; peekMode: on;" 
            side="double"
            image="#deathstarskybox" position="0 1.6 200" scale="0 0 0"
            animation__scale="property: scale; from: 0 0 0; to: 1 1 1: dur: 2000; delay: 85001;" class="clickable"
            animation__position="property: position; to: 0 1.6 0; delay: 84000;"></a-link>


        <a-entity light="type: ambient; intensity: 3.5;" ></a-entity>
        <a-entity 
            camera
            look-controls 
            position="0 1.6 3"
            visible="true"
        >
            <a-entity cursor raycaster="far: 30; interval: 1000; objects: .clickable"></a-entity>
        </a-entity>

    </a-scene>

</body>

</html>